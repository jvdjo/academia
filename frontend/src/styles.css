@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
* { box-sizing: border-box; }

/* Theme tokens - default light theme */
:root {
	--bg: #f8fafc;
	--text: #111827;
	--muted: #6b7280;
	--card-bg: #ffffff;
	--border: #e5e7eb;
	--btn-primary: #2563eb;
	--btn-primary-text: #ffffff;
	--btn-secondary: #e5e7eb;
	--btn-secondary-text: #111827;
	--input-bg: #ffffff;
	--input-border: #d1d5db;
	--header-bg: rgba(255,255,255,.85);
	--backdrop: rgba(0,0,0,.5);
	--shadow: 0 1px 2px rgba(0,0,0,.06);
	color-scheme: light;
}

/* Dark theme overrides */
[data-theme="dark"] {
	--bg: #0f172a;
	--text: #e5e7eb;
	--muted: #9ca3af;
	--card-bg: #111827;
	--border: #374151;
	--btn-primary: #2563eb;
	--btn-primary-text: #ffffff;
	--btn-secondary: #4b5563;
	--btn-secondary-text: #ffffff;
	--input-bg: #1f2937;
	--input-border: #374151;
	--header-bg: rgba(17,24,39,.8);
	--backdrop: rgba(0,0,0,.7);
	--shadow: 0 1px 2px rgba(0,0,0,.3);
	color-scheme: dark;
}

body { margin: 0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; background:var(--bg); color:var(--text); }
.container { max-width: 1280px; margin: 0 auto; padding: 1rem; }
.card { background:var(--card-bg); border:1px solid var(--border); border-radius: 12px; padding: 1rem; overflow:hidden; box-shadow: var(--shadow) }
.btn { background:var(--btn-primary); color:var(--btn-primary-text); border:0; border-radius: 8px; padding: .6rem 1rem; cursor:pointer }
.btn.secondary { background:var(--btn-secondary); color:var(--btn-secondary-text); border:1px solid var(--border) }
.grid { display:grid; gap:1rem }
.grid.week { grid-template-columns: repeat(1,minmax(0,1fr)); }
@media(min-width:640px){ .grid.week{ grid-template-columns: repeat(2,minmax(0,1fr)); }}
@media(min-width:900px){ .grid.week{ grid-template-columns: repeat(3,minmax(0,1fr)); }}
@media(min-width:1400px){ .grid.week{ grid-template-columns: repeat(4,minmax(0,1fr)); }}
.modal-backdrop{ position:fixed; inset:0; background:var(--backdrop); display:flex; align-items:center; justify-content:center; padding: 12px }
.modal{ background:var(--card-bg); border:1px solid var(--border); border-radius: 12px; width:min(900px,96vw); max-height: 90vh; display:flex; flex-direction:column; box-shadow: var(--shadow) }
.modal-header{ position:sticky; top:0; z-index:1; background:var(--card-bg); border-bottom:1px solid var(--border); padding: 12px 16px; display:flex; align-items:center; justify-content:space-between }
.modal-body{ padding: 12px 16px; overflow:auto }
.modal-footer{ position:sticky; bottom:0; background:var(--card-bg); border-top:1px solid var(--border); padding: 12px 16px; display:flex; justify-content:flex-end; gap:8px }
input,button{ font:inherit }
input{ background:var(--input-bg); border:1px solid var(--input-border); color:var(--text); border-radius:8px; padding:.6rem .8rem; width:100% }
header{ position:sticky; top:0; background:var(--header-bg); backdrop-filter:saturate(180%) blur(8px); border-bottom:1px solid var(--border); z-index:10 }
.small{ font-size:.85rem; color:var(--muted) }

/* Responsive helpers */
.card.login{ width:min(100%, 420px); margin-inline:auto }
.card.login form .btn{ width:100% }
.planner-modal-grid{ grid-template-columns: 1fr }
@media(min-width:900px){ .planner-modal-grid{ grid-template-columns: 260px 1fr } }

/* Day card layout */
.day-card{ display:flex; flex-direction:column; gap:12px; min-height: 320px }
.day-card .day-header{ display:flex; justify-content:space-between; align-items:center; margin-bottom: 6px }
.day-card .day-header strong{ font-size:1.05rem }
.day-card .day-meta{ display:flex; align-items:center; gap:8px }
.status-dot{ width: 10px; height: 10px; border-radius: 999px; background:#6b7280 }
.pill{ padding: 2px 8px; border-radius:999px; background: var(--btn-secondary); color: var(--btn-secondary-text); font-size:.75rem; border:1px solid var(--border) }
.day-card .day-muscles{ min-height: 28px; display:flex; flex-wrap:wrap; gap:6px }
.badge{ display:inline-block; padding:2px 8px; border-radius:999px; border:1px solid var(--border); background: rgba(37,99,235,.08); color: var(--text) }
.day-card .day-exercises{ min-height: 56px; max-height: 200px; overflow:auto; -webkit-overflow-scrolling: touch; word-break: break-word; padding-right: 2px; line-height:1.35 }
/* Optional thin scrollbar for WebKit */
.day-card .day-exercises::-webkit-scrollbar{ width:6px; height:6px }
.day-card .day-exercises::-webkit-scrollbar-thumb{ background:#374151; border-radius:6px }
.day-card .day-exercises::-webkit-scrollbar-track{ background:transparent }
.day-card .day-actions{ margin-top:auto; display:flex; gap:8px; flex-wrap:wrap }
.day-card .day-actions .btn{ flex:1 1 140px }

/* Make exercise list items clickable */
.day-exercises .exercise-item { cursor: pointer; }
.day-exercises .exercise-item:hover { opacity: .9; }

/* Accordion list (mobile) */
.accordion-list{ display:grid; gap:.6rem }
.day-accordion{ background: var(--card-bg); border:1px solid var(--border); border-radius: 10px; overflow:hidden }
.day-accordion > summary{ list-style:none; display:flex; align-items:center; justify-content:space-between; padding:.75rem 1rem; cursor:pointer; }
.day-accordion > summary::-webkit-details-marker{ display:none }
.day-acc-right{ display:flex; align-items:center; gap:8px }
.day-accordion .accordion-body{ padding: .5rem 1rem 1rem; display:grid; gap:.6rem }

/* Theme toggle (login only) */
.theme-toggle{ position:fixed; top:10px; right:12px; z-index:1000 }

/* Temporary highlight when focusing an exercise */
.pulse-highlight {
	animation: pulseBg 1s ease;
}
@keyframes pulseBg {
	0% { background-color: rgba(96,165,250,0.0); }
	25% { background-color: rgba(96,165,250,0.25); }
	50% { background-color: rgba(96,165,250,0.35); }
	100% { background-color: rgba(96,165,250,0.0); }
}

/* Helpers */
.muted{ color: var(--muted); }

/* Set editor */
.set-list{ display:grid; gap:10px }
.set-item{ display:grid; gap:6px; padding:10px; border:1px dashed var(--border); border-radius:8px; background: color-mix(in srgb, var(--card-bg) 90%, transparent) }
.set-item input{ height: 40px }
.set-actions{ display:flex; justify-content:flex-end; margin-top:4px }

/* Mobile tweaks */
@media (max-width: 480px){
	.container{ padding: .75rem; }
	header .container{ flex-wrap: wrap; gap:8px; padding-block: 8px; }
	.grid{ gap: .6rem; }
	.card{ padding: .75rem; border-radius: 10px; }
	.btn{ padding: .5rem .75rem; font-size: .9rem; }
	input{ padding: .55rem .7rem; font-size: .95rem; }
	.small{ font-size: .8rem; }
	.pill{ padding: 1px 6px; font-size: .7rem; }
	.badge{ padding: 1px 6px; font-size: .8rem; }
	.day-card{ min-height: 260px; }
	.day-card .day-header strong{ font-size: 1rem; }
	.day-card .day-exercises{ max-height: 140px; }
	.day-card .day-actions{ flex-direction: column; }
	.modal-backdrop{ padding: 0; }
	.modal{ width:100vw; height:100vh; max-height: 100vh; border-radius: 0; }
	.modal-body{ padding: 12px; }
	.modal-header, .modal-footer{ padding: 10px 12px; }
}
